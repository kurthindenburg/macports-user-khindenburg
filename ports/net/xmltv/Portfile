# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

PortGroup           perl5 1.0

name                xmltv
version             0.5.70
categories          net perl
license             GPL-2+
platforms           darwin
supported_archs     noarch
maintainers         khindenburg openmaintainer

description         Gather television listings, process them and organize your viewing.
long_description    ${description}

homepage            http://wiki.xmltv.org/index.php/XMLTVProject
master_sites        sourceforge:/project/xmltv/xmltv/${version}
use_bzip2           yes

checksums           rmd160  a3a0305340fa81db2c8c8d197e9aba8c5fd43883 \
                    sha256  237b03dc33668c46ed2e275b91739ca01e7f5a5c2ee63679d9bbb7f8d0bd6b6d \
                    size    1274164

set perl_version    5.28
perl5.branches      ${perl_version}

depends_lib-append  port:perl${perl_version} \
                    port:p${perl_version}-date-manip \
                    port:p${perl_version}-datetime \
                    port:p${perl_version}-file-slurp \
                    port:p${perl_version}-soap-lite \
                    port:p${perl_version}-term-readkey \
                    port:p${perl_version}-xml-libxml \
                    port:p${perl_version}-xml-treepp \
                    port:p${perl_version}-xml-twig \
                    port:p${perl_version}-xml-writer

configure {
    # Use EOF to agree to questions - for now agree to what it finds
    # Use INSTALLSITE* otherwise all binaries are in libexec/perl5.16/sitebin
    system -W ${worksrcpath} "${prefix}/bin/perl${perl_version} Makefile.PL \
        INSTALLSITEBIN=${prefix}/bin INSTALLSITESCRIPT=${prefix}/bin << EOF
yes
EOF"
}

post-destroot {
    delete {*}[glob ${destroot}${prefix}/lib/perl5/*/*/perllocal.pod]
}

livecheck.regex     xmltv/files/xmltv/(\[0-9.\]+)
